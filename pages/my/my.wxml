<!--pages/my.wxml-->

<!--**
 * Project: WooCommerce微信小程序
 * Description: 将WooCommerce商城接入微信小程序
 * Author: 
 * Organization: 
 */-->

<import src="/templates/login-popup.wxml" />
<import src="/templates/login.wxml" />

<view class="container my">
    <view class="block user-info">
        <view class="avatar-blur {{blurClass}}">
            <image src="{{userInfo == null || userInfo == '' ? '/images/not-logged-background.png' : userInfo.avatarUrl}}" mode="widthFix" style="{{userInfo == null || userInfo == '' ? 'filter:blur(0);' : ''}}"></image>
        </view>
        <view class="avatar-blur-mask"></view>
        <template is="login" data="{{userInfo}}"></template>
    </view>
    <view class="block block-btn main">
        <button class="order-list" bindtap="goOrderList">
            <view class="left-area">
                <image src="/images/form_light.svg"></image>
                <text>我的订单</text>
            </view>
            <view class="right-area">
                <image class="go" src="/images/go_light.svg"></image>
            </view>
        </button>
        <view class="order-statuses">
            <block wx:for="{{['pending', 'processing', 'shipped', 'completed']}}" wx:key="key">
                <view class="order-status" data-status="{{item}}" bindtap="goOrderList">
                    <view class="order-status-inner">
                        <image src="/images/{{item}}.svg"></image>
                        <text>{{orderStatuses[item]}}</text>
                        <text wx:if="{{memberInfo.orders[item] > 0}}" class="orders-count">{{memberInfo.orders[item]}}</text>
                    </view>
                </view>
            </block>
        </view>
        <!-- W2W Extension, Name: w2w-advanced-coupon, Code: couponButton -->
        <button class="coupon-btn" bindtap="goMyCoupon">
            <view class="left-area">
                <image src="/images/coupon_light.svg"></image>
                <text>我的优惠券</text>
            </view>
        </button>
        <!-- W2W Extension, Name: w2w-advanced-coupon, Code: couponButton -->
        <!-- W2W Extension, Name: w2w-products-distribution, Code: distributionButton -->

<!-- W2W Extension, Name: w2w-products-distribution, Code: distributionButton -->
        <!-- W2W Extension, Name: w2w-points-and-rewards, Code: pointsButton -->

<!-- W2W Extension, Name: w2w-points-and-rewards, Code: pointsButton -->
        <!-- W2W Extension, Name: w2w-products-groupon, Code: grouponButton -->
        <button class="groupon-btn" bindtap="goMyGroupon">
            <view class="left-area">
                <image src="/images/groupon_light.svg"></image>
                <text>我的拼团</text>
            </view>
        </button>
        <!-- W2W Extension, Name: w2w-products-groupon, Code: grouponButton -->
        <!-- W2W Extension, Name: w2w-products-favor, Code: favorButton -->
        <button class="favor-btn" bindtap="goMyFavour">
            <view class="left-area">
                <image src="/images/favor_light.svg"></image>
                <text>我的收藏</text>
            </view>
        </button>
        <!-- W2W Extension, Name: w2w-products-favor, Code: favorButton -->
        <!-- W2W Extension, Name: w2w-advanced-address, Code: addressButton -->
        <button class="address-btn" bindtap="goAddressList">
            <view class="left-area">
                <image src="/images/location_light.svg"></image>
                <text>收货地址</text>
            </view>
        </button>
        <!-- W2W Extension, Name: w2w-advanced-address, Code: addressButton -->
    </view>
    <view class="block block-btn about">
        <!-- W2W Extension, Name: w2w-scan-to-login, Code: scanButton -->
        <button class="scan-btn" bindtap="scanQRCode">
            <view class="left-area">
                <image src="/images/qr_code_light.svg"></image>
                <text>扫码登录</text>
            </view>
        </button>
        <!-- W2W Extension, Name: w2w-scan-to-login, Code: scanButton -->
        <button class="contact-btn" open-type="contact" show-message-card="true" session-from="shop-about" send-message-title="商城个人页">
            <view class="left-area">
                <image src="/images/service_light.svg"></image>
                <text>联系我们</text>
            </view>
        </button>
        <button class="feedback-btn" open-type="feedback">
            <view class="left-area">
                <image src="/images/edit_light.svg"></image>
                <text>意见反馈</text>
            </view>
        </button>
        <button class="clear-btn" bindtap="clearCache">
            <view class="left-area">
                <image src="/images/clear_light.svg"></image>
                <text>清除缓存</text>
            </view>
        </button>
        <button class="about-btn" bindtap="goAbout">
            <view class="left-area">
                <image src="/images/about.svg"></image>
                <text>关于 {{appName}}</text>
            </view>
        </button>
    </view>

    <template is="login-popup" data="{{show: isLoginPopup, userInfo}}"></template>
</view>